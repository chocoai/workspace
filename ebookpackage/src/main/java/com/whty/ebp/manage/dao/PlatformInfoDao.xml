<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.ebp.manage.dao.PlatformInfoDao">

	<resultMap type="com.whty.ebp.manage.model.PlatformInfo" id="platformInfoResultPage">
		<result column="platform_code" property="platformCode" jdbcType="VARCHAR" />
		<result column="platform_name" property="platformName" jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" />
		<result column="update_time" property="updateTime" />
	</resultMap>

	<select id="loadById" parameterType="string" resultMap="platformInfoResultPage">
		select * from TA_PLATFORM_INFO where platform_code= #{_parameter}
	</select>

	
	
	
	
	<select id="deleteByDerivativeEbpAppId" parameterType="string">
		delete from DERIVATIVE_EBP_APP_PLATFORM_INFO where derivative_ebp_app_id= #{_parameter}
	</select>
	
	<delete id="deleteByWhiteListId" parameterType="string">
		delete from TA_APP_WHITE_LIST_PLATFORM_INFO where APP_WHITE_LIST_ID= #{_parameter}
	</delete>

	<insert id="saveAppWhiteListPlatformInfo" parameterType="map">
		insert into TA_APP_WHITE_LIST_PLATFORM_INFO(
		<trim suffixOverrides=",">
			<if test="appWhiteListId != null">app_white_list_id,</if>
			<if test="platformCode != null">platform_code,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="appWhiteListId != null">#{appWhiteListId},</if>
			<if test="platformCode != null">#{platformCode},</if>
		</trim>
		)
	</insert>


	<insert id="saveDerivativeAppPlatformInfo" parameterType="map">
		insert into DERIVATIVE_EBP_APP_PLATFORM_INFO(
		<trim suffixOverrides=",">
			<if test="derivativeEbpAppId != null">derivative_Ebp_App_Id,</if>
			<if test="platformCode != null">platform_code,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="derivativeEbpAppId != null">#{derivativeEbpAppId},</if>
			<if test="platformCode != null">#{platformCode},</if>
		</trim>
		)
	</insert>


	<select id="queryPlatformInfoByAppWhiteListId" parameterType="map"
		resultType="java.util.HashMap">
		select t2.platform_code,t2.platform_name from TA_APP_WHITE_LIST_PLATFORM_INFO t1 left join TA_PLATFORM_INFO t2 
		on t1.PLATFORM_CODE=t2.PLATFORM_CODE 
		WHERE 1=1
		<if test="appWhiteListId != null "> and t1.app_White_List_Id=#{appWhiteListId}</if>
		<if test="platformCode != null "> and t1.platform_code=#{platformCode}</if>
	</select>




 
	<delete id="deleteById" parameterType="string">
		delete from TA_PLATFORM_INFO
		where platform_code=#{_parameter}
	</delete>


	<insert id="saveAppPlatformInfo" parameterType="map">
		insert into EBP_APP_PLATFORM_INFO(
		<trim suffixOverrides=",">
			<if test="ebpAppId != null">ebp_app_id,</if>
			<if test="platformCode != null">platform_code,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="ebpAppId != null">#{ebpAppId},</if>
			<if test="platformCode != null">#{platformCode},</if>
		</trim>
		)
	</insert>

	<delete id="deleteByEbpAppId" parameterType="string">
		delete from
		EBP_APP_PLATFORM_INFO where EBP_APP_ID= #{_parameter}
	</delete>


	<select id="queryPlatformInfoByDerivativeEbpAppId" parameterType="map"
		resultType="java.util.HashMap">
		select t2.platform_code,t2.platform_name from DERIVATIVE_EBP_APP_PLATFORM_INFO t1 left join TA_PLATFORM_INFO t2 
		on t1.PLATFORM_CODE=t2.PLATFORM_CODE 
		WHERE 1=1
		<if test="derivativeEbpAppId != null "> and t1.derivative_ebp_app_id=#{derivativeEbpAppId}</if>
	</select>

	<select id="queryPlatformInfoByAppId" parameterType="map"
		resultType="java.util.HashMap">
		select t2.platform_code,t2.platform_name from EBP_APP_PLATFORM_INFO t1 left join TA_PLATFORM_INFO t2 
		on t1.PLATFORM_CODE=t2.PLATFORM_CODE 
		WHERE 1=1
		<if test="ebpAppId != null "> and t1.ebp_app_id=#{ebpAppId}</if>
	</select>
 
  
	<select id="listByCondition" parameterType="map" resultMap="platformInfoResultPage">
		SELECT * FROM TA_PLATFORM_INFO where 1=1
		<if test="platformCode != null "> and platform_code=#{platformCode}</if>
	</select>

	<insert id="save">
		insert into TA_PLATFORM_INFO (
		<trim suffixOverrides=",">
			<if test="platformCode != null">platform_code,</if>
			<if test="platformName != null">platform_name,</if>
			<if test="createTime != null">create_Time,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="platformCode != null">#{platformCode},</if>
			<if test="platformName != null">#{platformName},</if>
			<if test="createTime != null">#{createTime},</if>
		</trim>
		)
	</insert>


	<update id="update">
		update TA_PLATFORM_INFO set
		<trim suffixOverrides=",">
			<if test="platformName != null">platform_Name=#{platformName},</if>
			<if test="updateTime != null">update_time=#{updateTime},</if>
		</trim>
		where platform_code=#{platformCode}
	</update>

</mapper>