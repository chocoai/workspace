<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.ebp.manage.dao.SchoolAppDao">

	<resultMap type="com.whty.ebp.manage.model.SchoolApp" id="SchoolAppResultPage">
		<result column="id" property="id" />
		<result column="platform_code" property="platformCode"  />
		
		<result column="platform_name" property="platformName" />
		
		<result column="org_id" property="orgId"  />
		<result column="app_name" property="appName" />
		<result column="apk_package_name" property="apkPackageName" />
		<result column="icon" property="icon" />
		<result column="md5" property="md5" />
		<result column="file_size" property="fileSize" />
		<result column="description" property="description" />
		<result column="inter_version_code" property="interVersionCode" />
		<result column="version_code" property="versionCode" />
		<result column="down_url" property="downUrl" />
		<result column="create_time" property="createTime" />
		<result column="status" property="status" />
		
		<result column="org_name" property="orgName" />
	</resultMap>

	<select id="loadById" parameterType="int" resultMap="SchoolAppResultPage">
		select t1.*,t2.platform_name from EBP_SCHOOL_APP t1 left join TA_PLATFORM_INFO t2 on t1.platform_code = t2.PLATFORM_CODE 
		 where t1.id= #{_parameter}
	</select>


	<select id="listByCondition" parameterType="map" resultMap="SchoolAppResultPage">
		select t1.*,t2.platform_name from EBP_SCHOOL_APP t1 left join TA_PLATFORM_INFO t2 on t1.platform_code = t2.PLATFORM_CODE where 1=1
		<if test="platformCode != null "> and t1.platform_code=#{platformCode}</if>
		<if test="orgId != null "> and t1.org_id=#{orgId}</if>
		<if test="status != null "> and t1.status=#{status}</if>
	</select>

	<insert id="save">
		insert into EBP_SCHOOL_APP(
		<trim suffixOverrides=",">
			<if test="platformCode != null">platform_code,</if>
			<if test="orgId != null">org_id,</if>
			<if test="orgName != null">org_name,</if>
			<if test="appName != null">app_name,</if>
			<if test="apkPackageName != null">apk_package_name,</if>
			<if test="icon != null">icon,</if>
			<if test="md5 != null">md5,</if>
			<if test="fileSize != null">file_size,</if>
			<if test="description != null">description,</if>
			<if test="interVersionCode != null">inter_version_code,</if>
			<if test="versionCode != null">version_code,</if>
			<if test="downUrl != null">down_url,</if>
			<if test="createTime != null">create_time,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="platformCode != null">#{platformCode},</if>
			<if test="orgId != null">#{orgId},</if>
			<if test="orgName != null">#{orgName},</if>
			<if test="appName != null">#{appName},</if>
			<if test="apkPackageName != null">#{apkPackageName},</if>
			<if test="icon != null">#{icon},</if>
			<if test="md5 != null">#{md5},</if>
			<if test="fileSize != null">#{fileSize},</if>
			<if test="description != null">#{description},</if>
			<if test="interVersionCode != null">#{interVersionCode},</if>
			<if test="versionCode != null">#{versionCode},</if>
			<if test="downUrl != null">#{downUrl},</if>
			<if test="createTime != null">#{createTime},</if>
		</trim>
		)
	</insert>

	
	
	<delete id="deleteById" parameterType="int">
		delete from EBP_SCHOOL_APP where id= #{_parameter}
	</delete>
	
	<update id="update" parameterType="com.whty.ebp.manage.model.SchoolApp">
		update EBP_SCHOOL_APP set 
		<trim prefixOverrides=",">
			<if test="platformCode != null ">, platform_code=#{platformCode}</if>
			<if test="orgId != null ">, org_id=#{orgId}</if>
			<if test="appName != null ">, app_name=#{appName}</if>
			<if test="apkPackageName != null ">, apk_package_name=#{apkPackageName}</if>
			<if test="icon != null and icon != ''">, icon=#{icon}</if>
			<if test="md5 != null and md5 != ''">, md5=#{md5}</if>
			<if test="fileSize != null and fileSize != ''">, file_size=#{fileSize}</if>
			<if test="description != null and description != ''">, description=#{description}</if>
			<if test="interVersionCode != null and interVersionCode != ''">, inter_version_code=#{interVersionCode}</if>
			<if test="downUrl != null and downUrl != ''">, down_url=#{downUrl}</if>
			<if test="status != null and status != ''">, status=#{status}</if>
		</trim>
		where id=#{id}
	</update>
	

</mapper>