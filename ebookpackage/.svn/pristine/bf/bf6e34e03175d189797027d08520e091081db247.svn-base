<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.ebp.manage.dao.FlatModelDao">

	<resultMap type="com.whty.ebp.manage.model.FlatModel" id="flatModelResultPage">
		<result column="id" property="id" jdbcType="VARCHAR" />
		<result column="model_code" property="modelCode" jdbcType="VARCHAR" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" />
		<result column="update_time" property="updateTime" />
	</resultMap>

	<select id="loadById" parameterType="string" resultMap="flatModelResultPage">
		select *
		from TA_FLAT_MODEL where id= #{_parameter}
	</select>


	<delete id="deleteByDerivativeEbpAppId" parameterType="string">
		delete from DERIVATIVE_EBP_APP_FLAT_MODEL where DERIVATIVE_EBP_APP_ID=#{_parameter}
	</delete>

	<delete id="deleteAppWhiteListFlatModeId" parameterType="string">
		delete from TA_APP_WHITE_LIST_FLAT_MODEL where FLAT_MODEL_ID= #{_parameter}
	</delete>

	<delete id="deleteEbpAppFlatModelByFlatModelId" parameterType="string">
		delete from EBP_APP_FLAT_MODEL where FLAT_MODEL_ID= #{_parameter}
	</delete>

	<delete id="deleteById" parameterType="string">
		delete from TA_FLAT_MODEL
		where id=#{_parameter}
	</delete>

	<insert id="saveAppFlatModel" parameterType="map">
		insert into EBP_APP_FLAT_MODEL(
		<trim suffixOverrides=",">
			<if test="ebpAppId != null">ebp_app_id,</if>
			<if test="flatModelId != null">flat_model_id,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="ebpAppId != null">#{ebpAppId},</if>
			<if test="flatModelId != null">#{flatModelId},</if>
		</trim>
		)
	</insert>

	<insert id="saveDerivativeAppFlatModel" parameterType="map">
		insert into DERIVATIVE_EBP_APP_FLAT_MODEL(
		<trim suffixOverrides=",">
			<if test="derivativeEbpAppId != null">DERIVATIVE_EBP_APP_ID,</if>
			<if test="flatModelId != null">flat_model_id,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="derivativeEbpAppId != null">#{derivativeEbpAppId},</if>
			<if test="flatModelId != null">#{flatModelId},</if>
		</trim>
		)
	</insert>



	<delete id="deleteByEbpAppId" parameterType="string">
		delete from
		EBP_APP_FLAT_MODEL where EBP_APP_ID= #{_parameter}
	</delete>

	<select id="queryFlatModelByAppId" parameterType="map"
		resultType="java.util.HashMap">
		select t3.id,t3.model_code from EBP_APP_FLAT_MODEL t1 left join
		EBP_APP t2 on t1.ebp_app_id=t2.id left join TA_FLAT_MODEL t3 on
		t1.FLAT_MODEL_ID=t3.ID
		WHERE 1=1
		<if test="ebpAppId != null "> and t1.ebp_app_id=#{ebpAppId}</if>
	</select>

	<select id="listByCondition" parameterType="map" resultMap="flatModelResultPage">
		SELECT * FROM TA_FLAT_MODEL where 1=1
		<if test="modelCode != null "> and model_code=#{modelCode}</if>
	</select>

	<insert id="save">
		insert into TA_FLAT_MODEL(
		<trim suffixOverrides=",">
			<if test="id != null">id,</if>
			<if test="modelCode != null">model_Code,</if>
			<if test="memo != null">memo,</if>
			<if test="createTime != null">create_Time,</if>
		</trim>
		)
		values(
		<trim suffixOverrides=",">
			<if test="id != null">#{id},</if>
			<if test="modelCode != null">#{modelCode},</if>
			<if test="memo != null">#{memo},</if>
			<if test="createTime != null">#{createTime},</if>
		</trim>
		)
	</insert>


	<update id="update">
		update TA_FLAT_MODEL set
		<trim suffixOverrides=",">
			<if test="memo != null">memo=#{memo},</if>
			<if test="updateTime != null">update_Time=#{updateTime},</if>
		</trim>
		where id=#{id}
	</update>

</mapper>