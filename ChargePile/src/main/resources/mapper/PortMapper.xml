<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fxzhj.mapper.PortMapper">
	<resultMap id="BaseResultMap" type="com.fxzhj.model.Port">
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="device_id" property="deviceId" jdbcType="BIGINT" />
		<result column="port_no" property="portNo" jdbcType="INTEGER" />
		<result column="status" property="status" jdbcType="INTEGER" />
		<result column="node_id" property="nodeId" jdbcType="VARCHAR" />
	</resultMap>
	
	<sql id="Base_Column_List">
		id, port_no, device_id, status, node_id
	</sql>
	
	<!-- 根据设备id查询端口信息 -->
	<select id="queryPort" resultMap="BaseResultMap" parameterType="java.lang.Long">
		select 
		<include refid="Base_Column_List" />  
		from t_port 
		where device_id=#{0}
	</select>
	
	<!-- 批量新增端口号 -->
	<insert id="batchPort" parameterType="java.util.List">
		insert into t_port (id, port_no, device_id, status, node_id)
		values 
		<foreach collection="list" item="item" index="index" separator=",">
			(#{item.id}, #{item.portNo}, #{item.deviceId}, #{item.status}, #{item.nodeId})
		</foreach>
	</insert>
	
	<!-- 根据deviceId修改状态 -->
	<update id="updateByDeviceId" parameterType="com.fxzhj.model.Port">
		update t_port set status=#{1} where device_id=#{0}
	</update>
	
	<!-- 根据id修改状态  -->
	<update id="updatePort" parameterType="com.fxzhj.model.Port">
		update t_port set status=#{1} where id=#{0}
	</update>
	
	<!-- 删除端口 -->
	<delete id="delete" parameterType="java.lang.Long">
		delete from t_port where device_id = #{0}
	</delete>
	<cache />
</mapper>