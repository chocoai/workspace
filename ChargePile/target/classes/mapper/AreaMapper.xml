<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fxzhj.mapper.AreaMapper">
	<resultMap id="BaseResultMap" type="com.fxzhj.model.Area">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="parent_id" property="parentId" jdbcType="INTEGER" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="sort" property="sort" jdbcType="TINYINT" />
		<result column="deep" property="deep" jdbcType="TINYINT" />
		<result column="region" property="region" jdbcType="VARCHAR" />
		<result column="area_status" property="areaStatus" jdbcType="INTEGER" />
	</resultMap>
	
	<sql id="Base_Column_List">
		id, parent_id, name, sort, deep, region, area_status
	</sql>
    
    <!-- 查询省 -->
	<select id="queryProvince" resultMap="BaseResultMap">
        select a.* from t_area a,(
			select a.* from t_area a , area_view b where a.id=b.parent_id GROUP BY a.id ORDER BY a.id
		) c where  a.id=c.parent_id GROUP BY a.id ORDER BY a.id
    </select>
    
    <!-- 查询市 -->
	<select id="queryCity" resultMap="BaseResultMap" parameterType="java.lang.Integer">
		select a.* from t_area a , area_view b where a.id=b.parent_id and a.parent_id=#{0} GROUP BY a.id  ORDER BY a.id
    </select>
	
	<!-- 查询去区县 -->
	<select id="queryCounty" resultMap="BaseResultMap" parameterType="java.lang.Integer">
		select 
		<include refid="Base_Column_List" /> 
		from area_view where parent_id=#{0} ORDER BY id
    </select>
	<cache />
</mapper>