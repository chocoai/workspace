<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yhcrt.iHealthCloud.mapper.OrganizationMapper">
	<resultMap id="BaseResultMap" type="com.yhcrt.iHealthCloud.entity.Organization">
		<id column="org_id" jdbcType="INTEGER" property="orgId" />
		<result column="org_name" jdbcType="VARCHAR" property="orgName" />
		<result column="org_code" jdbcType="VARCHAR" property="orgCode" />
		<result column="parent_org_id" jdbcType="INTEGER" property="parentOrgId" />
		<result column="org_type" jdbcType="VARCHAR" property="orgType" />
		<result column="org_nature" jdbcType="VARCHAR" property="orgNature" />
		<result column="org_tag" jdbcType="VARCHAR" property="orgTag" />
		<result column="org_logo" jdbcType="VARCHAR" property="orgLogo" />
		<result column="title_img" jdbcType="VARCHAR" property="titleImg" />
		<result column="area_id" jdbcType="VARCHAR" property="areaId" />
		<result column="area" jdbcType="VARCHAR" property="area" />
		<result column="longitude" jdbcType="DOUBLE" property="longitude" />
		<result column="latitude" jdbcType="DOUBLE" property="latitude" />
		<result column="linkman" jdbcType="VARCHAR" property="linkman" />
		<result column="phone_number" jdbcType="VARCHAR" property="phoneNumber" />
		<result column="tel" jdbcType="VARCHAR" property="tel" />
		<result column="email" jdbcType="VARCHAR" property="email" />
		<result column="fax" jdbcType="VARCHAR" property="fax" />
		<result column="address" jdbcType="VARCHAR" property="address" />
		<result column="postcode" jdbcType="VARCHAR" property="postcode" />
		<result column="org_score" jdbcType="DOUBLE" property="orgScore" />
		<result column="org_intro" jdbcType="VARCHAR" property="orgIntro" />
		<result column="create_user" jdbcType="VARCHAR" property="createUser" />
		<result column="create_time" jdbcType="VARCHAR" property="createTime" />
		<result column="update_time" jdbcType="VARCHAR" property="updateTime" />
		<result column="order_num" jdbcType="INTEGER" property="orderNum" />
		<result column="status" jdbcType="INTEGER" property="status" />
		<result column="remark" jdbcType="VARCHAR" property="remark" />
		<association property="parentOrg" column="parent_org_id" select="selectByPrimaryKey"></association>
	</resultMap>
	<resultMap id="ResultMapWithBLOBs" extends="BaseResultMap" type="com.yhcrt.iHealthCloud.entity.Organization">
		<result column="content" jdbcType="LONGVARCHAR" property="content" />
		<result column="org_facility" jdbcType="LONGVARCHAR" property="orgFacility" />
	</resultMap>
	<sql id="Example_Where_Clause">
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and #{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and #{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach collection="criterion.value" item="listItem"
										open="(" separator="," close=")">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		org_id, org_name, org_code, parent_org_id, org_type,
		org_nature, org_tag, org_logo, title_img,
		area_id, area, longitude,
		latitude, linkman, phone_number, tel, email, fax, address, postcode,
		org_score, org_intro, create_user, create_time, update_time,
		order_num, status, remark
	</sql>
	<sql id="Blob_Column_List">
		content,org_facility
	</sql>
	<select id="selectByExampleWithBLOBs" parameterType="com.yhcrt.iHealthCloud.entity.OrganizationExample"
		resultMap="ResultMapWithBLOBs">
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from organization
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>

	<select id="getHotOrgByAreaCode" parameterType="String"
		resultMap="ResultMapWithBLOBs">
		select t1.* from organization t1
		inner join area t2 on
		t1.area_id=t2.area_id
		where t2.area_code like '%${areaCode}%'
		order by
		t1.org_score desc
	</select>

	<select id="getOrgByServiceType" parameterType="map" resultMap="ResultMapWithBLOBs">
		select t1.* from organization t1
		inner join area t2 on t1.area_id=t2.area_id
		inner join service t3 on t3.org_id = t1.org_id
		where t2.area_code like '%${areaCode}%' 
		and	t3.service_type=#{serviceType} 
		and t1.status = '0' 
		<if test="orgName != null and orgName != '' ">
			and t1.org_name=#{orgName} 
		</if>
		order by t1.org_score desc
	</select>

	<select id="getOrgListByGps" parameterType="map" resultMap="ResultMapWithBLOBs">
		select t1.* from organization t1
		left join service t2 on t2.org_id = t1.org_id
		where 1=1
		<if test="orgType != null and orgType != '' ">
			and t1.org_type=#{orgType,jdbcType=VARCHAR}
		</if>
		<if test="serviceType != null and serviceType != '' ">
			and t2.service_type=#{serviceType,jdbcType=VARCHAR}
		</if>
		and ROUND(
		6378.138 * 2 * ASIN(
		SQRT(
		POW(
		SIN((#{lat,jdbcType=DOUBLE} *
		PI() / 180 - latitude * PI() / 180) / 2), 2 ) +
		COS(#{lat,jdbcType=DOUBLE} * PI() / 180) *
		COS(latitude * PI() / 180) *
		POW( SIN((#{lgt,jdbcType=DOUBLE} * PI() / 180 - longitude * PI() / 180) /
		2), 2 )
		)
		) * 1000
		) &lt; 5000
		order by t1.org_score desc
	</select>
	
	<select id="selectByExample" parameterType="com.yhcrt.iHealthCloud.entity.OrganizationExample"
		resultMap="ResultMapWithBLOBs">
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from organization
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from organization
		where org_id = #{orgId,jdbcType=INTEGER}
	</select>

	<select id="getOrgRootNode" parameterType="java.lang.Integer"
		resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from organization where parent_org_id is null
	</select>

	<select id="getChildOrgByParentId" parameterType="java.lang.Integer"
		resultMap="ResultMapWithBLOBs">
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from organization
		where parent_org_id = #{parentId,jdbcType=INTEGER}
		and status != 1 order by
		org_id desc
	</select>

	<select id="getLastOrgCodeByParentId" parameterType="java.lang.Integer" resultType="java.lang.String">
		select max(org_code) from organization
		where parent_org_id = #{parentId,jdbcType=INTEGER}
		and status != 1 order by org_id desc
	</select>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		delete from organization where org_id = #{orgId,jdbcType=INTEGER}
	</delete>

	<delete id="deleteByExample" parameterType="com.yhcrt.iHealthCloud.entity.OrganizationExample">
		delete from organization
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete>

	<insert id="insert" parameterType="com.yhcrt.iHealthCloud.entity.Organization">
		insert into organization
		(org_id, org_name, org_code, parent_org_id, org_type, org_nature,
		org_tag, org_logo, title_img, area_id, area, longitude, latitude,
		linkman, phone_number,
		tel, email, fax, address, postcode, org_score,
		org_intro, create_user, create_time,
		update_time, order_num, status, remark, content, org_facility)
		values
		(#{orgId,jdbcType=INTEGER}, #{orgName,jdbcType=VARCHAR},
		#{orgCode,jdbcType=VARCHAR},
		#{parentOrgId,jdbcType=INTEGER},
		#{orgType,jdbcType=VARCHAR}, #{orgNature,jdbcType=VARCHAR},
		#{orgTag,jdbcType=VARCHAR}, #{orgLogo,jdbcType=VARCHAR},
		#{titleImg,jdbcType=VARCHAR},
		#{areaId,jdbcType=VARCHAR},
		#{area,jdbcType=VARCHAR}, #{longitude,jdbcType=DOUBLE},
		#{latitude,jdbcType=DOUBLE}, #{linkman,jdbcType=VARCHAR},
		#{phoneNumber,jdbcType=VARCHAR},
		#{tel,jdbcType=VARCHAR},
		#{email,jdbcType=VARCHAR}, #{fax,jdbcType=VARCHAR},
		#{address,jdbcType=VARCHAR}, #{postcode,jdbcType=VARCHAR},
		#{orgScore,jdbcType=DOUBLE}, #{orgIntro,jdbcType=VARCHAR},
		#{createUser,jdbcType=VARCHAR}, #{createTime,jdbcType=VARCHAR},
		#{updateTime,jdbcType=VARCHAR}, #{orderNum,jdbcType=INTEGER},
		#{status,jdbcType=INTEGER}, #{remark,jdbcType=VARCHAR},
		#{content,jdbcType=LONGVARCHAR}, #{orgFacility,jdbcType=LONGVARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.yhcrt.iHealthCloud.entity.Organization">
		insert into organization
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="orgId != null">
				org_id,
			</if>
			<if test="orgName != null">
				org_name,
			</if>
			<if test="orgCode != null">
				org_code,
			</if>
			<if test="parentOrgId != null">
				parent_org_id,
			</if>
			<if test="orgType != null">
				org_type,
			</if>
			<if test="orgNature != null">
				org_nature,
			</if>
			<if test="orgTag != null">
				org_tag,
			</if>
			<if test="orgLogo != null">
				org_logo,
			</if>
			<if test="titleImg != null">
				title_img,
			</if>
			<if test="areaId != null">
				area_id,
			</if>
			<if test="area != null">
				area,
			</if>
			<if test="longitude != null">
				longitude,
			</if>
			<if test="latitude != null">
				latitude,
			</if>
			<if test="linkman != null">
				linkman,
			</if>
			<if test="phoneNumber != null">
				phone_number,
			</if>
			<if test="tel != null">
				tel,
			</if>
			<if test="email != null">
				email,
			</if>
			<if test="fax != null">
				fax,
			</if>
			<if test="address != null">
				address,
			</if>
			<if test="postcode != null">
				postcode,
			</if>
			<if test="orgScore != null">
				org_score,
			</if>
			<if test="orgIntro != null">
				org_intro,
			</if>
			<if test="createUser != null">
				create_user,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
			<if test="orderNum != null">
				order_num,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="content != null">
				content,
			</if>
			<if test="orgFacility != null">
				org_facility,
			</if>

		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="orgId != null">
				#{orgId,jdbcType=INTEGER},
			</if>
			<if test="orgName != null">
				#{orgName,jdbcType=VARCHAR},
			</if>
			<if test="orgCode != null">
				#{orgCode,jdbcType=VARCHAR},
			</if>
			<if test="parentOrgId != null">
				#{parentOrgId,jdbcType=INTEGER},
			</if>
			<if test="orgType != null">
				#{orgType,jdbcType=VARCHAR},
			</if>
			<if test="orgNature != null">
				#{orgNature,jdbcType=VARCHAR},
			</if>
			<if test="orgTag != null">
				#{orgTag,jdbcType=VARCHAR},
			</if>
			<if test="orgLogo != null">
				#{orgLogo,jdbcType=VARCHAR},
			</if>
			<if test="titleImg != null">
				#{titleImg,jdbcType=VARCHAR},
			</if>
			<if test="areaId != null">
				#{areaId,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				#{area,jdbcType=VARCHAR},
			</if>
			<if test="longitude != null">
				#{longitude,jdbcType=DOUBLE},
			</if>
			<if test="latitude != null">
				#{latitude,jdbcType=DOUBLE},
			</if>
			<if test="linkman != null">
				#{linkman,jdbcType=VARCHAR},
			</if>
			<if test="phoneNumber != null">
				#{phoneNumber,jdbcType=VARCHAR},
			</if>
			<if test="tel != null">
				#{tel,jdbcType=VARCHAR},
			</if>
			<if test="email != null">
				#{email,jdbcType=VARCHAR},
			</if>
			<if test="fax != null">
				#{fax,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				#{address,jdbcType=VARCHAR},
			</if>
			<if test="postcode != null">
				#{postcode,jdbcType=VARCHAR},
			</if>
			<if test="orgScore != null">
				#{orgScore,jdbcType=DOUBLE},
			</if>
			<if test="orgIntro != null">
				#{orgIntro,jdbcType=VARCHAR},
			</if>
			<if test="createUser != null">
				#{createUser,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=VARCHAR},
			</if>
			<if test="updateTime != null">
				#{updateTime,jdbcType=VARCHAR},
			</if>
			<if test="orderNum != null">
				#{orderNum,jdbcType=INTEGER},
			</if>
			<if test="status != null">
				#{status,jdbcType=INTEGER},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="content != null">
				#{content,jdbcType=LONGVARCHAR},
			</if>
			<if test="orgFacility != null">
				#{orgFacility,jdbcType=LONGVARCHAR},
			</if>

		</trim>
	</insert>
	<select id="countByExample" parameterType="com.yhcrt.iHealthCloud.entity.OrganizationExample"
		resultType="java.lang.Long">
		select count(*) from organization
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>

	<update id="updateByExampleSelective" parameterType="map">
		update organization
		<set>
			<if test="record.orgId != null">
				org_id = #{record.orgId,jdbcType=INTEGER},
			</if>
			<if test="record.orgName != null">
				org_name = #{record.orgName,jdbcType=VARCHAR},
			</if>
			<if test="record.orgCode != null">
				org_code = #{record.orgCode,jdbcType=VARCHAR},
			</if>
			<if test="record.parentOrgId != null">
				parent_org_id = #{record.parentOrgId,jdbcType=INTEGER},
			</if>
			<if test="record.orgType != null">
				org_type = #{record.orgType,jdbcType=VARCHAR},
			</if>
			<if test="record.orgNature != null">
				org_nature = #{record.orgNature,jdbcType=VARCHAR},
			</if>
			<if test="record.orgTag != null">
				org_tag = #{record.orgTag,jdbcType=VARCHAR},
			</if>
			<if test="record.orgLogo != null">
				org_logo = #{record.orgLogo,jdbcType=VARCHAR},
			</if>
			<if test="record.titleImg != null">
				title_img = #{record.titleImg,jdbcType=VARCHAR},
			</if>
			<if test="record.areaId != null">
				area_id = #{record.areaId,jdbcType=VARCHAR},
			</if>
			<if test="record.area != null">
				area = #{record.area,jdbcType=VARCHAR},
			</if>
			<if test="record.longitude != null">
				longitude = #{record.longitude,jdbcType=DOUBLE},
			</if>
			<if test="record.latitude != null">
				latitude = #{record.latitude,jdbcType=DOUBLE},
			</if>
			<if test="record.linkman != null">
				linkman = #{record.linkman,jdbcType=VARCHAR},
			</if>
			<if test="record.phoneNumber != null">
				phone_number = #{record.phoneNumber,jdbcType=VARCHAR},
			</if>
			<if test="record.tel != null">
				tel = #{record.tel,jdbcType=VARCHAR},
			</if>
			<if test="record.email != null">
				email = #{record.email,jdbcType=VARCHAR},
			</if>
			<if test="record.fax != null">
				fax = #{record.fax,jdbcType=VARCHAR},
			</if>
			<if test="record.address != null">
				address = #{record.address,jdbcType=VARCHAR},
			</if>
			<if test="record.postcode != null">
				postcode = #{record.postcode,jdbcType=VARCHAR},
			</if>
			<if test="record.orgScore != null">
				org_score = #{record.orgScore,jdbcType=DOUBLE},
			</if>
			<if test="record.orgIntro != null">
				org_intro = #{record.orgIntro,jdbcType=VARCHAR},
			</if>
			<if test="record.createUser != null">
				create_user = #{record.createUser,jdbcType=VARCHAR},
			</if>
			<if test="record.createTime != null">
				create_time = #{record.createTime,jdbcType=VARCHAR},
			</if>
			<if test="record.updateTime != null">
				update_time = #{record.updateTime,jdbcType=VARCHAR},
			</if>
			<if test="record.orderNum != null">
				order_num = #{record.orderNum,jdbcType=INTEGER},
			</if>
			<if test="record.status != null">
				status = #{record.status,jdbcType=INTEGER},
			</if>
			<if test="record.remark != null">
				remark = #{record.remark,jdbcType=VARCHAR},
			</if>
			<if test="record.content != null">
				content = #{record.content,jdbcType=LONGVARCHAR},
			</if>
			<if test="record.orgFacility != null">
				org_facility =
				#{record.orgFacility,jdbcType=LONGVARCHAR},
			</if>
		</set>
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExampleWithBLOBs" parameterType="map">
		update organization
		set org_id = #{record.orgId,jdbcType=INTEGER},
		org_name = #{record.orgName,jdbcType=VARCHAR},
		org_code =
		#{record.orgCode,jdbcType=VARCHAR},
		parent_org_id =
		#{record.parentOrgId,jdbcType=INTEGER},
		org_type =
		#{record.orgType,jdbcType=VARCHAR},
		org_nature =
		#{record.orgNature,jdbcType=VARCHAR},
		org_tag =
		#{record.orgTag,jdbcType=VARCHAR},
		org_logo =
		#{record.orgLogo,jdbcType=VARCHAR},
		title_img =
		#{record.titleImg,jdbcType=VARCHAR},
		area_id =
		#{record.areaId,jdbcType=VARCHAR},
		area =
		#{record.area,jdbcType=VARCHAR},
		longitude =
		#{record.longitude,jdbcType=DOUBLE},
		latitude =
		#{record.latitude,jdbcType=DOUBLE},
		linkman =
		#{record.linkman,jdbcType=VARCHAR},
		phone_number =
		#{record.phoneNumber,jdbcType=VARCHAR},
		tel =
		#{record.tel,jdbcType=VARCHAR},
		email =
		#{record.email,jdbcType=VARCHAR},
		fax = #{record.fax,jdbcType=VARCHAR},
		address = #{record.address,jdbcType=VARCHAR},
		postcode =
		#{record.postcode,jdbcType=VARCHAR},
		org_score =
		#{record.orgScore,jdbcType=DOUBLE},
		org_intro =
		#{record.orgIntro,jdbcType=VARCHAR},
		create_user =
		#{record.createUser,jdbcType=VARCHAR},
		create_time =
		#{record.createTime,jdbcType=VARCHAR},
		update_time =
		#{record.updateTime,jdbcType=VARCHAR},
		order_num =
		#{record.orderNum,jdbcType=INTEGER},
		status =
		#{record.status,jdbcType=INTEGER},
		remark =
		#{record.remark,jdbcType=VARCHAR},
		content =
		#{record.content,jdbcType=LONGVARCHAR},
		org_facility =
		#{record.orgFacility,jdbcType=LONGVARCHAR}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>

	<update id="updateByExample" parameterType="map">
		update organization
		set org_id = #{record.orgId,jdbcType=INTEGER},
		org_name = #{record.orgName,jdbcType=VARCHAR},
		org_code =
		#{record.orgCode,jdbcType=VARCHAR},
		parent_org_id =
		#{record.parentOrgId,jdbcType=INTEGER},
		org_type =
		#{record.orgType,jdbcType=VARCHAR},
		org_nature =
		#{record.orgNature,jdbcType=VARCHAR},
		org_tag =
		#{record.orgTag,jdbcType=VARCHAR},
		org_logo =
		#{record.orgLogo,jdbcType=VARCHAR},
		title_img =
		#{record.titleImg,jdbcType=VARCHAR},
		area_id =
		#{record.areaId,jdbcType=VARCHAR},
		area =
		#{record.area,jdbcType=VARCHAR},
		longitude =
		#{record.longitude,jdbcType=DOUBLE},
		latitude =
		#{record.latitude,jdbcType=DOUBLE},
		linkman =
		#{record.linkman,jdbcType=VARCHAR},
		phone_number =
		#{record.phoneNumber,jdbcType=VARCHAR},
		tel =
		#{record.tel,jdbcType=VARCHAR},
		email =
		#{record.email,jdbcType=VARCHAR},
		fax = #{record.fax,jdbcType=VARCHAR},
		address = #{record.address,jdbcType=VARCHAR},
		postcode =
		#{record.postcode,jdbcType=VARCHAR},
		org_score =
		#{record.orgScore,jdbcType=DOUBLE},
		org_intro =
		#{record.orgIntro,jdbcType=VARCHAR},
		create_user =
		#{record.createUser,jdbcType=VARCHAR},
		create_time =
		#{record.createTime,jdbcType=VARCHAR},
		update_time =
		#{record.updateTime,jdbcType=VARCHAR},
		order_num =
		#{record.orderNum,jdbcType=INTEGER},
		status =
		#{record.status,jdbcType=INTEGER},
		remark =
		#{record.remark,jdbcType=VARCHAR}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByPrimaryKeySelective" parameterType="com.yhcrt.iHealthCloud.entity.Organization">
		update organization
		<set>
			<if test="orgName != null">
				org_name = #{orgName,jdbcType=VARCHAR},
			</if>
			<if test="orgCode != null">
				org_code = #{orgCode,jdbcType=VARCHAR},
			</if>
			<if test="parentOrgId != null">
				parent_org_id = #{parentOrgId,jdbcType=INTEGER},
			</if>
			<if test="orgType != null">
				org_type = #{orgType,jdbcType=VARCHAR},
			</if>
			<if test="orgNature != null">
				org_nature = #{orgNature,jdbcType=VARCHAR},
			</if>
			<if test="orgTag != null">
				org_tag = #{orgTag,jdbcType=VARCHAR},
			</if>
			<if test="orgLogo != null">
				org_logo = #{orgLogo,jdbcType=VARCHAR},
			</if>
			<if test="titleImg != null">
				title_img = #{titleImg,jdbcType=VARCHAR},
			</if>
			<if test="areaId != null">
				area_id = #{areaId,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				area = #{area,jdbcType=VARCHAR},
			</if>
			<if test="longitude != null">
				longitude = #{longitude,jdbcType=DOUBLE},
			</if>
			<if test="latitude != null">
				latitude = #{latitude,jdbcType=DOUBLE},
			</if>
			<if test="linkman != null">
				linkman = #{linkman,jdbcType=VARCHAR},
			</if>
			<if test="phoneNumber != null">
				phone_number = #{phoneNumber,jdbcType=VARCHAR},
			</if>
			<if test="tel != null">
				tel = #{tel,jdbcType=VARCHAR},
			</if>
			<if test="email != null">
				email = #{email,jdbcType=VARCHAR},
			</if>
			<if test="fax != null">
				fax = #{fax,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				address = #{address,jdbcType=VARCHAR},
			</if>
			<if test="postcode != null">
				postcode = #{postcode,jdbcType=VARCHAR},
			</if>
			<if test="orgScore != null">
				org_score = #{orgScore,jdbcType=DOUBLE},
			</if>
			<if test="orgIntro != null">
				org_intro = #{orgIntro,jdbcType=VARCHAR},
			</if>
			<if test="createUser != null">
				create_user = #{createUser,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				create_time = #{createTime,jdbcType=VARCHAR},
			</if>
			<if test="updateTime != null">
				update_time = #{updateTime,jdbcType=VARCHAR},
			</if>
			<if test="orderNum != null">
				order_num = #{orderNum,jdbcType=INTEGER},
			</if>
			<if test="status != null">
				status = #{status,jdbcType=INTEGER},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="content != null">
				content = #{content,jdbcType=LONGVARCHAR},
			</if>
			<if test="orgFacility != null">
				org_facility = #{orgFacility,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where org_id = #{orgId,jdbcType=INTEGER}
	</update>
	
	<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.yhcrt.iHealthCloud.entity.Organization">
		update
		organization
		set org_name =
		#{orgName,jdbcType=VARCHAR},
		org_code =
		#{orgCode,jdbcType=VARCHAR},
		parent_org_id =
		#{parentOrgId,jdbcType=INTEGER},
		org_type =
		#{orgType,jdbcType=VARCHAR},
		org_nature =
		#{orgNature,jdbcType=VARCHAR},
		org_tag = #{orgTag,jdbcType=VARCHAR},
		org_logo = #{orgLogo,jdbcType=VARCHAR},
		title_img =
		#{titleImg,jdbcType=VARCHAR},
		area_id = #{areaId,jdbcType=VARCHAR},
		area = #{area,jdbcType=VARCHAR},
		longitude =
		#{longitude,jdbcType=DOUBLE},
		latitude = #{latitude,jdbcType=DOUBLE},
		linkman = #{linkman,jdbcType=VARCHAR},
		phone_number =
		#{phoneNumber,jdbcType=VARCHAR},
		tel = #{tel,jdbcType=VARCHAR},
		email =
		#{email,jdbcType=VARCHAR},
		fax = #{fax,jdbcType=VARCHAR},
		address =
		#{address,jdbcType=VARCHAR},
		postcode = #{postcode,jdbcType=VARCHAR},
		org_score = #{orgScore,jdbcType=DOUBLE},
		org_intro =
		#{orgIntro,jdbcType=VARCHAR},
		create_user =
		#{createUser,jdbcType=VARCHAR},
		create_time =
		#{createTime,jdbcType=VARCHAR},
		update_time =
		#{updateTime,jdbcType=VARCHAR},
		order_num =
		#{orderNum,jdbcType=INTEGER},
		status = #{status,jdbcType=INTEGER},
		remark = #{remark,jdbcType=VARCHAR},
		content =
		#{content,jdbcType=LONGVARCHAR}
		org_facility =
		#{orgFacility,jdbcType=LONGVARCHAR}
		where org_id =
		#{orgId,jdbcType=INTEGER}
	</update>

	<update id="updateByPrimaryKey" parameterType="com.yhcrt.iHealthCloud.entity.Organization">
		update
		organization
		set org_name =
		#{orgName,jdbcType=VARCHAR},
		org_code =
		#{orgCode,jdbcType=VARCHAR},
		parent_org_id =
		#{parentOrgId,jdbcType=INTEGER},
		org_type =
		#{orgType,jdbcType=VARCHAR},
		org_nature =
		#{orgNature,jdbcType=VARCHAR},
		org_tag = #{orgTag,jdbcType=VARCHAR},
		org_logo = #{orgLogo,jdbcType=VARCHAR},
		title_img =
		#{titleImg,jdbcType=VARCHAR},
		area_id = #{areaId,jdbcType=VARCHAR},
		area = #{area,jdbcType=VARCHAR},
		longitude =
		#{longitude,jdbcType=DOUBLE},
		latitude = #{latitude,jdbcType=DOUBLE},
		linkman = #{linkman,jdbcType=VARCHAR},
		phone_number =
		#{phoneNumber,jdbcType=VARCHAR},
		tel = #{tel,jdbcType=VARCHAR},
		email =
		#{email,jdbcType=VARCHAR},
		fax = #{fax,jdbcType=VARCHAR},
		address =
		#{address,jdbcType=VARCHAR},
		postcode = #{postcode,jdbcType=VARCHAR},
		org_score = #{orgScore,jdbcType=DOUBLE},
		org_intro =
		#{orgIntro,jdbcType=VARCHAR},
		create_user =
		#{createUser,jdbcType=VARCHAR},
		create_time =
		#{createTime,jdbcType=VARCHAR},
		update_time =
		#{updateTime,jdbcType=VARCHAR},
		order_num =
		#{orderNum,jdbcType=INTEGER},
		status = #{status,jdbcType=INTEGER},
		remark = #{remark,jdbcType=VARCHAR}
		where org_id =
		#{orgId,jdbcType=INTEGER}
	</update>

	<select id="getAllChildOrgByParentCode" parameterType="String"
		resultMap="ResultMapWithBLOBs">
		<bind name="parentCode" value="_parameter + '%'" />
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from organization
		where org_code LIKE #{parentCode} and status = 0
		order by org_id asc
	</select>

</mapper>