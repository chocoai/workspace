<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.assis.demo.dao.DemoDao">

	<!-- 这里的Demo是别名，需要在mybatis-config.xml中定义，或者写类全名 -->
	<resultMap type="Demo" id="DemoResult">
		<id property="id" column="id" />
		<result property="title" column="title" />
		<result property="content" column="content" />
		<result property="createrId" column="createrId" />
		<result property="createrName" column="createrName" />
		<result property="createrTime" column="createrTime" />
		<result property="status" column="status" />
		<result property="deleted" column="deleted" />
	</resultMap>
	
	
	
	<!-- 如果插入的字段可能为空，则要设置jdbcType -->
	<insert id="save" parameterType="Demo">
		insert into TB_DEMO (
			id,title,content,createrId,createrName,createrTime,status,deleted
		) values (
			#{id},#{title},#{content,jdbcType=VARCHAR},#{createrId},#{createrName},#{createrTime},#{status},#{deleted}
		)
	</insert>
	
	<!-- 如果只有一个参数，则必须用#{_parameter}访问 , 用逻辑删除还是物理删除看产品定义-->
	<update id="deleteById" parameterType="string">
		update TB_DEMO set deleted=1 where id=#{_parameter}
	</update>
	
	<!-- 这里的Demo是别名，需要在mybatis-config.xml中定义，或者写类全名 -->
	<update id="update" parameterType="Demo">
		update TB_DEMO
		set title=#{title},content=#{content}
		where id=#{id}
	</update>
	
	<!-- 根据条件动态更新 -->
	<update id="updateByCondition" parameterType="map">
		update TB_DEMO
		<trim prefix="set" suffixOverrides=",">
			<if test="title != null">title=#{title},</if>
			<if test="content != null">content=#{content},</if>
			<if test="status != null">status=#{status},</if>
		</trim>
		where id=#{id}
	</update>
	
	<select id="loadById" parameterType="string" resultMap="DemoResult">
		select * from TB_DEMO where id = #{_parameter}
	</select>
	
	<select id="listByCondition" parameterType="map" resultMap="DemoResult">
		select * from TB_DEMO
		where deleted=0
		<if test="createrName != null">and createrName=#{createrName}</if>
		order by createrTime desc
	</select>
		<select id="listByConditionListPage" parameterType="map"  resultMap="DemoResult">
		select * from tb_demo
		where deleted=0
		
		<if test="createrName != null">and createrName=#{createrName}</if>
		order by createrTime desc
	</select>
</mapper>