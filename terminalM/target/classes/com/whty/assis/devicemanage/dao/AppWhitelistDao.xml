<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.assis.devicemanage.dao.AppWhitelistDao">
	
	<resultMap type="com.whty.assis.devicemanage.model.AppWhitelist" id="AppWhitelistResult">
		<result property="id" column="id" />
		<result property="appWhitelistRuleId" column="app_whitelist_id" />
		<result property="appInfoId" column="app_info_id" />
		<result property="appInfoName" column="app_info_name" />
	</resultMap>
	
	<insert id="save" parameterType="com.whty.assis.devicemanage.model.AppWhitelist">
		insert into t_app_whitelist(
		app_whitelist_rule_id
		 ,app_info_id
			) values (
				#{appWhitelistRuleId}
				,#{appInfoId}
			)
	</insert>

	<delete id="deleteById" parameterType="int" >
		delete from t_app_whitelist where id=#{_parameter}
	</delete>

	<delete id="deleteByRuleId" parameterType="int" >
		delete from t_app_whitelist where app_whitelist_rule_id=#{appWhitelistRuleId}
	</delete>


	<select id="loadById" parameterType="int" resultMap="AppWhitelistResult">
		select t1.*,t2.name as app_info_name from t_app_whitelist t1 left join t_app_info t2 on t1.app_info_id = t2.id where t1.id=#{_parameter}
	</select>

	<select id="listByCondition" parameterType="map" resultMap="AppWhitelistResult">
		select t1.*,t2.name as app_info_name from t_app_whitelist t1 left join t_app_info t2 on t1.app_info_id = t2.id
		where 1=1
		<if test="id != null ">and t1.id=#{id}</if>
		<if test="appWhitelistRuleId != null and appWhitelistRuleId !='' ">and t1.app_whitelist_rule_id=#{appWhitelistRuleId}</if>
	</select>
	

	
</mapper>
