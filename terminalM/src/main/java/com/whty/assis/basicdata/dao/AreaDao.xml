<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.assis.basicdata.dao.AreaDao">

	<resultMap type="com.whty.assis.basicdata.model.Area" id="Area">
		<result property="id" column="id" />
		<result property="areaCode" column="area_code" />
		<result property="parentId" column="parent_id" />
		<result property="sortNum" column="sort_num" />
		<result property="levelName" column="level_name" />
		<result property="areaName" column="area_name" />
		<result property="levelId" column="level_id" />
		<result property="status" column="status" />
	</resultMap>
	
	<resultMap type="java.util.HashMap" id="AreaResult">
		<result column="AREA_CODE" property="areaCode"/>
		<result column="AREA_NAME" property="areaName"/>
	</resultMap>
	
	<select id="listArea" parameterType="map" resultType="map">
		select area_code,area_name
		from ta_area
		where status=0
		<if test="parentId != null and parentId != ''">and parent_id=#{parentId}</if>
		<if test="levelId != null">and level_id=#{levelId}</if>
	</select>
	
		<select id="queryArea" parameterType="map" resultMap="AreaResult">
		select area_code,area_name
		from ta_area
		where status=0
		<if test="parentId != null and parentId != ''">and parent_id=#{parentId}</if>
		<if test="levelId != null">and level_id=#{levelId}</if>
	</select>
	
	<select id="getTAreaByCity" parameterType="map" resultMap="AreaResult">
		select area_code,area_name from ta_area where parent_Id=#{parentId} 
	</select>
	
	<select id="getArea" parameterType="map" resultMap="Area">
		select area_code,parent_id,area_name from ta_area where status=0
		<if test="areaCode != null and areaCode != ''">and area_code=#{areaCode}</if>
	</select>
	
	<select id="loadById" parameterType="String" resultMap="Area">
		select area_code,parent_id,area_name from ta_area where id=#{id}
	</select>
	
	<select id="queryAreaNameByAreaCode" parameterType="map" resultType="string">
		select distinct area_name
		from ta_area
		where status=0
		<if test="areaCode != null and areaCode != ''">
			and area_code like #{areaCode}||'%'
		</if>
		<if test="levelId != null">and level_id=#{levelId}</if>
	</select>
	
	<select id="getAreaByLevelId" parameterType="java.lang.Integer" resultMap="Area">
		select id,area_code,area_name from ta_area where status=0
		and level_id = #{levelId}
	</select>
	<select id="getAreaByParentId" parameterType="java.lang.Integer" resultMap="Area">
		select id,area_code,area_name from ta_area where status=0
		and parent_id = #{parentId}
	</select>
	
</mapper>
