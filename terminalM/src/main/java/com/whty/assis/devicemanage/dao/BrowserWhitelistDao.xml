<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.assis.devicemanage.dao.BrowserWhitelistDao">
	
	<resultMap type="com.whty.assis.devicemanage.model.BrowserWhitelist" id="BrowserWhitelistResult">
		<result property="id" column="id" />
		<result property="url" column="url" />
		<result property="browserWhitelistRuleId" column="browser_whitelist_rule_id" />
	</resultMap>
	
	<insert id="save" parameterType="com.whty.assis.devicemanage.model.BrowserWhitelist">
		insert into t_browser_whitelist(
		url
		,browser_whitelist_rule_id
			) values (
				#{url}
				,#{browserWhitelistRuleId}
			)
	</insert>

	<update id="update" parameterType="com.whty.assis.devicemanage.model.BrowserWhitelist">
		update t_browser_whitelist 
		set 
		<trim prefixOverrides=",">
			<if test="name != null and name != ''">, name=#{name}</if>
			<if test="memo != null and memo != ''">, memo=#{memo}</if>
			<if test="updateTime != null ">, update_time=#{updateTime}</if>
		</trim>
		where id=#{id}
	</update>

	<delete id="deleteByRuleId" parameterType="int" >
		delete from t_browser_whitelist where browser_whitelist_rule_id=#{_parameter}
	</delete>

	<delete id="deleteById" parameterType="int" >
		delete from t_browser_whitelist where id=#{_parameter}
	</delete>

	<select id="loadById" parameterType="int" resultMap="BrowserWhitelistResult">
		select * from t_browser_whitelist where 1=1 and id=#{_parameter}
	</select>

	<select id="listByCondition" parameterType="map" resultMap="BrowserWhitelistResult">
		select * from t_browser_whitelist where 1=1 
		<if test="id != null ">and id=#{id}</if>
		<if test="browserWhitelistRuleId != null ">and browser_whitelist_rule_id=#{browserWhitelistRuleId}</if>
	</select>
	
	<select id="getwhiteListBySchoolClassId" parameterType="int" resultMap="BrowserWhitelistResult">
	select * from t_browser_whitelist where browser_whitelist_rule_id in
(select browser_whitelist_rule_id from t_school_class_browser_whitelist_rule where school_class_id=#{_parameter})
	</select>
	
	
</mapper>
