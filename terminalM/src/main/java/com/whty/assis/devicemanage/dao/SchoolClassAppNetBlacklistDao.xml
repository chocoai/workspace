<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whty.assis.devicemanage.dao.SchoolClassAppNetBlacklistDao">
	
	<resultMap type="com.whty.assis.devicemanage.model.SchoolClassAppNetBlacklist" id="SchoolClassAppNetBlacklistResult">
		<result property="id" column="id" />
		<result property="schoolClassId" column="schoolClassId" />
		<result property="appNetBlacklistId" column="app_net_blacklist_id" />
		<result property="createTime" column="create_time" />
		<result property="updateTime" column="update_time" />
	</resultMap>
	
	<insert id="save" parameterType="com.whty.assis.devicemanage.model.SchoolClassAppNetBlacklist">
		insert into t_school_class_app_net_blacklist(
		school_class_id
		,app_net_blacklist_id
		,create_time
		,update_time
			) values (
				#{schoolClassId}
				,#{appNetBlacklistId}
				,#{createTime}
				,#{updateTime}
			)
	</insert>

	<delete id="deleteById" parameterType="int" >
		delete from t_school_class_app_net_blacklist where id=#{_parameter}
	</delete>

	<select id="loadById" parameterType="int" resultMap="SchoolClassAppNetBlacklistResult">
		select * from t_school_class_app_net_blacklist where id=#{_parameter}
	</select>

	<select id="listByCondition" parameterType="map" resultMap="SchoolClassAppNetBlacklistResult">
		select * from t_school_class_app_net_blacklist where 1=1
		<if test="id != null ">and t1.id=#{id}</if>
		<if test="schoolClassId != null ">and school_class_id=#{schoolClassId}</if>
		<if test="appNetBlacklistId != null ">and app_net_blacklist_id=#{appNetBlacklistId}</if>
	</select>
	
	<select id="listBySchoolClassRule" parameterType="int" resultMap="SchoolClassAppNetBlacklistResult">
		select *,(select count(*) from t_browser_whitelist where browser_whitelist_rule_id = t1.id) as urlTotal from t_browser_whitelist_rule t1
where id in(select browser_whitelist_rule_id from t_school_class_browser_whitelist_rule where school_class_id=#{_parameter})
	</select>
	
</mapper>
